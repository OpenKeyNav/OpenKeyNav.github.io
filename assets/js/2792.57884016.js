"use strict";(self.webpackChunkdocsite=self.webpackChunkdocsite||[]).push([[2792],{2792:(e,t)=>{function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw a}}}}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t,n){return t=u(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(s())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var i=new(e.bind.apply(e,o));return n&&f(i,n.prototype),i}(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)},l(e)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,g(o.key),o)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var b=function(){return v((function e(){d(this,e),this.config={spot:{fontColor:"white",backgroundColor:"#333",insetColor:"#000",fontSize:"inherit",arrowSize_px:4},focus:{outlineColor:"#0088cc",outlineStyle:"solid"},keys:{escape:"q",click:"k",scroll:"s",move:"m",heading:"h",textBlock:"n",landmarkRegion:"d",formField:"f",mouseOver:"v",heading_1:"1",heading_2:"2",heading_3:"3",heading_4:"4",heading_5:"5",heading_6:"6"},modesConfig:{move:{config:[],selectedConfig:!1,selectedMoveable:!1,selectedMoveableHTML:!1,selectedDropZone:!1,modifier:!1},click:{modifier:!1,clickEventElements:new Set,eventListenersMap:new Map}},log:[],typedLabel:"",headings:{currentHeadingIndex:0,list:[]},scrollables:{currentScrollableIndex:0,list:[]},modes:{clicking:!1,moving:!1},debug:{screenReaderVisible:!1,keyboardAccessible:!0},init:function(){deepMerge(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),injectStylesheet(),addKeydownEventListener()}}}),[{key:"setupTouchEvent",value:function(){window.TouchEvent=function(e){function t(e,n){var o;return d(this,t),(o=c(this,t,[e,n])).touches=n.touches||[],o.targetTouches=n.targetTouches||[],o.changedTouches=n.changedTouches||[],o.altKey=n.altKey||!1,o.metaKey=n.metaKey||!1,o.ctrlKey=n.ctrlKey||!1,o.shiftKey=n.shiftKey||!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),v(t)}(l(Event)),window.Touch=v((function e(t){var n=t.identifier,o=t.target,i=t.clientX,r=t.clientY;d(this,e),this.identifier=n,this.target=o,this.clientX=i,this.clientY=r,this.screenX=i,this.screenY=r,this.pageX=i,this.pageY=r}))}},{key:"deepMerge",value:function(e,t){var n=this;return Object.keys(t).forEach((function(o){t[o]&&"object"===a(t[o])?(e[o]&&"object"===a(e[o])||(e[o]={}),n.deepMerge(e[o],t[o])):e[o]=t[o]})),e}},{key:"injectStylesheet",value:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".openKeyNav-label {font: inherit;vertical-align: baseline;box-sizing: border-box;white-space: nowrap;"+"border: 1px solid ".concat(this.config.spot.fontColor,";")+"background-color: ".concat(this.config.spot.backgroundColor,";")+"color: ".concat(this.config.spot.fontColor,";")+"display: inline-block;"+"font-size: ".concat(this.config.spot.fontSize,";")+"outline-offset: -2px !important;font-weight: inherit;line-height: 1;margin: 0 .1em 0 1px;overflow-wrap: break-word;padding: 3px;"+"text-shadow: 0 1px 0 ".concat(this.config.spot.insetColor,";")+'min-width: 1rem;text-align: center;position: absolute;z-index: 99999999;font-family: monospace;}.openKeyNav-label[data-openkeynav-position="left"]::after, .openKeyNav-label[data-openkeynav-position="right"]::before, .openKeyNav-label[data-openkeynav-position="top"]::after, .openKeyNav-label[data-openkeynav-position="bottom"]::before, .openKeyNav-label[data-openkeynav-position="left"]::before, .openKeyNav-label[data-openkeynav-position="right"]::after, .openKeyNav-label[data-openkeynav-position="top"]::before, .openKeyNav-label[data-openkeynav-position="bottom"]::after {content: "";position: absolute;}.openKeyNav-label[data-openkeynav-position="left"]::after, .openKeyNav-label[data-openkeynav-position="right"]::before, .openKeyNav-label[data-openkeynav-position="left"]::before, .openKeyNav-label[data-openkeynav-position="right"]::after {top: 50%;transform: translateY(-50%);}.openKeyNav-label[data-openkeynav-position="top"]::after, .openKeyNav-label[data-openkeynav-position="bottom"]::before, .openKeyNav-label[data-openkeynav-position="top"]::before, .openKeyNav-label[data-openkeynav-position="bottom"]::after {left: 50%;transform: translateX(-50%);}.openKeyNav-label[data-openkeynav-position="left"]::before {'+"border-left: ".concat(this.config.spot.arrowSize_px+1,"px solid #fff;")+"right: -".concat(this.config.spot.arrowSize_px+1,"px;")+"border-top: ".concat(this.config.spot.arrowSize_px+1,"px solid transparent;")+"border-bottom: ".concat(this.config.spot.arrowSize_px+1,"px solid transparent;")+'}.openKeyNav-label[data-openkeynav-position="left"]::after {'+"border-left: ".concat(this.config.spot.arrowSize_px,"px solid ").concat(this.config.spot.backgroundColor,";")+"right: -".concat(this.config.spot.arrowSize_px,"px;")+"border-top: ".concat(this.config.spot.arrowSize_px,"px solid transparent;")+"border-bottom: ".concat(this.config.spot.arrowSize_px,"px solid transparent;")+'}.openKeyNav-label[data-openkeynav-position="right"]::before {'+"border-right: ".concat(this.config.spot.arrowSize_px+1,"px solid #fff;")+"left: -".concat(this.config.spot.arrowSize_px+1,"px;")+"border-top: ".concat(this.config.spot.arrowSize_px+1,"px solid transparent;")+"border-bottom: ".concat(this.config.spot.arrowSize_px+1,"px solid transparent;")+'}.openKeyNav-label[data-openkeynav-position="right"]::after {'+"border-right: ".concat(this.config.spot.arrowSize_px,"px solid ").concat(this.config.spot.backgroundColor,";")+"left: -".concat(this.config.spot.arrowSize_px,"px;")+"border-top: ".concat(this.config.spot.arrowSize_px,"px solid transparent;")+"border-bottom: ".concat(this.config.spot.arrowSize_px,"px solid transparent;")+'}.openKeyNav-label[data-openkeynav-position="top"]{padding-bottom: 0;}.openKeyNav-label[data-openkeynav-position="top"]::before {'+"border-top: ".concat(this.config.spot.arrowSize_px+1,"px solid #fff;")+"bottom: -".concat(this.config.spot.arrowSize_px+1,"px;")+"border-left: ".concat(this.config.spot.arrowSize_px+1,"px solid transparent;")+"border-right: ".concat(this.config.spot.arrowSize_px+1,"px solid transparent;")+'}.openKeyNav-label[data-openkeynav-position="top"]::after {'+"border-top: ".concat(this.config.spot.arrowSize_px,"px solid ").concat(this.config.spot.backgroundColor,";")+"bottom: -".concat(this.config.spot.arrowSize_px,"px;")+"border-left: ".concat(this.config.spot.arrowSize_px,"px solid transparent;")+"border-right: ".concat(this.config.spot.arrowSize_px,"px solid transparent;")+'}.openKeyNav-label[data-openkeynav-position="bottom"]{padding-top: 0;}.openKeyNav-label[data-openkeynav-position="bottom"]::before {'+"border-bottom: ".concat(this.config.spot.arrowSize_px+1,"px solid #fff;")+"top: -".concat(this.config.spot.arrowSize_px+1,"px;")+"border-left: ".concat(this.config.spot.arrowSize_px+1,"px solid transparent;")+"border-right: ".concat(this.config.spot.arrowSize_px+1,"px solid transparent;")+'}.openKeyNav-label[data-openkeynav-position="bottom"]::after {'+"border-bottom: ".concat(this.config.spot.arrowSize_px,"px solid ").concat(this.config.spot.backgroundColor,";")+"top: -".concat(this.config.spot.arrowSize_px,"px;")+"border-left: ".concat(this.config.spot.arrowSize_px,"px solid transparent;")+"border-right: ".concat(this.config.spot.arrowSize_px,"px solid transparent;")+"}.openKeyNav-label-selected{display : grid;align-content : center;"+"color : ".concat(this.config.spot.fontColor,";")+"background : ".concat(this.config.spot.backgroundColor,";")+"outline: none;}[data-openkeynav-label]:not(.openKeyNav-label):not(button){box-shadow:  inset 0 0 0 .5px #000,\n                        0 0 0 .75px #000,\n                        0 0 0 1.5px rgba(255,255,255,1);outline:none !important;border-color: #000;border-radius: 3px;}button[data-openkeynav-label]{outline:2px solid #000 !important;}.openKeyNav-inaccessible:not(.openKeyNav-label):not(button){box-shadow:  inset 0 0 0 .5px #f00,\n                        0 0 0 1px #f00,\n                        0 0 0 1.5px rgba(255,255,255,1);outline:none !important;border-color: #f00;border-radius: 3px;}button.openKeyNav-inaccessible{outline:2px solid #f00 !important;}.openKeyNav-inaccessible.openKeyNav-label{box-shadow:  inset 0 0 0 .5px #f00,\n                        0 0 0 1px #f00,\n                        0 0 0 1.5px rgba(255,255,255,1);border-color: #f00;border-radius: 3px;}.openKeyNav-noCursor *{cursor: none !important;}*:focus {"+"outline: 2px ".concat(this.config.focus.outlineStyle," ").concat(this.config.focus.outlineColor," !important;")+'outline-offset: -2px !important;}.openKeyNav-mouseover-tooltip{position: absolute;background-color: #333;color: #fff;padding: 5px;border-radius: 5px;display: none;z-index: 1000;font-size: 12px;}.openKeyNav-mouseover-tooltip::before{content: "Debug mode"}',document.head.appendChild(e)}},{key:"isNonzeroSize",value:function(e){var t=e.getBoundingClientRect();return t.width>0&&t.height>0}},{key:"isTextInputActive",value:function(){var e=document.activeElement.tagName.toLowerCase(),t=document.activeElement.getAttribute("contenteditable"),n="true"===t||"plaintext-only"===t||""===t;return["input","textarea"].includes(e)||n}},{key:"updateOverlayPosition",value:function(e,t){var n=document.querySelectorAll("[data-openkeynav-label], .openKeyNav-label-selected"),o=e.getBoundingClientRect(),i=t.getBoundingClientRect().width,r=t.getBoundingClientRect().height,a=this.config.spot.arrowSize_px;function c(e,t){return!(e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom)}function l(t){return(o=t.getBoundingClientRect()).left<0||o.right>window.innerWidth||o.top<0||o.bottom>window.innerHeight||Array.from(n).some((function(n){return n!==t&&n!==e&&(!c(e.getBoundingClientRect(),n.getBoundingClientRect())&&function(e,t){var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return c(n,o)&&function(){var o=[{x:n.left-0,y:n.top-0},{x:n.right+0,y:n.top-0},{x:n.left-0,y:n.bottom+0},{x:n.right+0,y:n.bottom+0}];e.style.visibility="hidden";var i=o.some((function(e){if(e.x>=0&&e.x<=window.innerWidth&&e.y>=0&&e.y<=window.innerHeight){var n=document.elementFromPoint(e.x,e.y);return t===n||t.contains(n)}return!1}));return e.style.visibility="visible",i}()}(t,n))}));var o}t.removeAttribute("data-openkeynav-position"),t.style.position="absolute",t.style.left="".concat(o.left-(i+a)+window.scrollX,"px"),t.style.top="".concat(o.top+window.scrollY,"px");var s="left";l(t)?(t.style.left="".concat(o.right+a-2+window.scrollX,"px"),s="right",l(t)?(t.style.left="".concat(o.left+window.scrollX,"px"),t.style.top="".concat(o.top-(r+a)+window.scrollY,"px"),s="top",l(t)?(t.style.left="".concat(o.left+window.scrollX,"px"),t.style.top="".concat(o.bottom+a+window.scrollY,"px"),s="bottom",l(t)?(t.removeAttribute("data-openkeynav-position"),t.style.left="".concat(o.left+window.scrollX,"px"),t.style.top="".concat(o.top+window.scrollY,"px")):t.setAttribute("data-openkeynav-position",s)):t.setAttribute("data-openkeynav-position",s)):t.setAttribute("data-openkeynav-position",s)):t.setAttribute("data-openkeynav-position",s)}},{key:"updateOverlayPosition_bak",value:function(e,t){for(var n=e.getBoundingClientRect(),o=n.left,i=n.top,r=e.ownerDocument.defaultView.frameElement;r;){var a=r.getBoundingClientRect();o+=a.left,i+=a.top,r=r.ownerDocument.defaultView.frameElement}t.style.left="".concat(o+window.scrollX,"px"),t.style.top="".concat(i+window.scrollY,"px")}},{key:"createOverlay",value:function(e,t){var n=this;var o=document.createElement("div");o.textContent=t,o.classList.add("openKeyNav-label"),o.setAttribute("data-openkeynav-label",t),o.addEventListener("click",(function(){try{inspect(e)}catch(t){console.log(e)}})),document.body.appendChild(o),this.updateOverlayPosition(e,o);var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=getComputedStyle(e),o="absolute"===n.position,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===n.position)return document.body;for(var r=e;r=r.parentElement;)if(n=getComputedStyle(r),(!o||"static"!==n.position)&&i.test(n.overflow+n.overflowY+n.overflowX))return r;return document.body}(e);return i&&i.addEventListener("scroll",(function(){return n.updateOverlayPosition(e,o)})),e.classList.contains("openKeyNav-inaccessible")&&o.classList.add("openKeyNav-inaccessible"),o}},{key:"isTopLeftCornerVisible",value:function(e){var t=e.ownerDocument,n=t.defaultView||t.parentWindow,o=e.getBoundingClientRect(),i=o.left+1,r=o.top+1;if(function(e){return e.ownerDocument!==window.document}(e)){var a=n.frameElement;if(a){var c=a.getBoundingClientRect();i+=c.left,r+=c.top,n=(t=a.ownerDocument).defaultView||t.parentWindow}}var l=t.elementFromPoint(i,r);return l===e||e.contains(l)}},{key:"getScrollableElements",value:function(){var e=this,t=document.body&&document.body.currentStyle?function(e){return e.currentStyle}:function(e){return document.defaultView.getComputedStyle(e,null)};function n(e,n){return t(e)[n]}function o(e){var t=n(e,"overflow-x");return"scroll"===t||e.offsetWidth<e.scrollWidth&&("scroll"===t||"auto"===t||"overlay"===t)}function i(e){var t=n(e,"overflow-y");return"scroll"===t||e.offsetHeight<e.scrollHeight&&("scroll"===t||"auto"===t||"overlay"===t)}function r(e){var t=n(e,"position"),o=n(e,"display"),i=n(e,"visibility");return"static"!==t||"inline"!==o||"hidden"===i}return[].filter.call(document.querySelectorAll("*"),(function(t){return e.config.debug.screenReaderVisible?r(t)&&(i(t)||o(t)):e.isTopLeftCornerVisible(t)&&r(t)&&(i(t)||o(t))}))}},{key:"preventScroll",value:function(e){return e.preventDefault(),e.stopPropagation(),!1}},{key:"clearMoveAttributes",value:function(){document.querySelectorAll("[data-openkeynav-moveconfig]").forEach((function(e){e.removeAttribute("data-openkeynav-moveconfig"),e.removeAttribute("data-openkeynav-draggable")}))}},{key:"removeOverlays",value:function(e){var t,n=this,o=function(){document.querySelectorAll(".openKeyNav-label").forEach((function(e){return e.remove()}))};if(this.config.modes.clicking&&((t=function(e){e.removeEventListener("scroll",n.preventScroll,{passive:!1}),e.removeEventListener("wheel",n.preventScroll,{passive:!1}),e.removeEventListener("touchmove",n.preventScroll,{passive:!1})})(window),n.getScrollableElements().forEach((function(e){t(e)}))),document.querySelectorAll(".openKeyNav-inaccessible").forEach((function(e){if(e.classList.remove("openKeyNav-inaccessible"),n.config.modesConfig.click.eventListenersMap.has(e)){var t=n.config.modesConfig.click.eventListenersMap.get(e),o=t.showTooltip,i=t.hideTooltip;e.removeEventListener("mouseover",o),e.removeEventListener("mouseleave",i),n.config.modesConfig.click.eventListenersMap.delete(e)}})),document.querySelectorAll(".openKeyNav-mouseover-tooltip").forEach((function(e){return e.remove()})),e)o();else if(this.config.modes.moving){var i=document.querySelector('.openKeyNav-label[data-openkeynav-label="'.concat(this.config.typedLabel,'"]'));i?(this.config.modesConfig.move.selectedLabel=i,function(e,t){e.innerHTML="&bull;",e.classList.add("openKeyNav-label-selected"),document.querySelectorAll('.openKeyNav-label:not([data-openkeynav-label="'.concat(t,'"])')).forEach((function(e){return e.remove()}))}(i,this.config.typedLabel)):o()}else o();document.querySelectorAll("[data-openkeynav-label]").forEach((function(e){e.removeAttribute("data-openkeynav-label")})),function(){for(var e in n.config.modes)n.config.modes[e]=!1;n.config.modesConfig.move.selectedConfig=!1,n.config.modesConfig.move.selectedMoveable=!1,n.config.modesConfig.move.selectedMoveableHTML=!1,n.config.modesConfig.move.selectedDropZone=!1,n.config.modesConfig.move.modifier=!1,n.config.modesConfig.click.modifier=!1}(),this.config.typedLabel=""}},{key:"flagAsInaccessible",value:function(e,t,n){if("keyboard"===n)if(!this.config.debug.keyboardAccessible)return!1;return e.classList.add("openKeyNav-inaccessible"),e.setAttribute("data-openkeynav-inaccessible-reason",t),!0}},{key:"addKeydownEventListener",value:function(){var e=this,t=function(){var t=e.config.modesConfig.move.selectedMoveable,n=t.getBoundingClientRect(),o=new DataTransfer;"undefined"==typeof TouchEvent&&e.setupTouchEvent();var i=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:n.left+n.width/2,clientY:n.top+n.height/2});t.dispatchEvent(i);var r=new TouchEvent("touchstart",{bubbles:!0,cancelable:!0,touches:[new Touch({identifier:Date.now(),target:t,clientX:n.left+n.width/2,clientY:n.top+n.height/2})]});t.dispatchEvent(r);var a=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,clientX:n.left+n.width/2+10,clientY:n.top+n.height/2+10});document.dispatchEvent(a);var c=new DragEvent("dragstart",{bubbles:!0,cancelable:!0,clientX:n.left+n.width/2+10,clientY:n.top+n.height/2+10,dataTransfer:o});Object.defineProperty(c,"dataTransfer",{value:o}),t.dispatchEvent(c)},i=function(t){var n=new DataTransfer,o=0,i=0,r=e.config.modesConfig.move.selectedMoveable;"undefined"==typeof TouchEvent&&e.setupTouchEvent(),r||(r=document.body),t||(t=document.body);var a=t.getBoundingClientRect();t!=document&&(o=a.left+a.width/2,i=a.top+a.height/2);var c=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,clientX:o,clientY:i}),l=new TouchEvent("touchmove",{bubbles:!0,cancelable:!0,touches:[new Touch({identifier:Date.now(),target:t,clientX:o,clientY:i})]}),s=new DragEvent("dragenter",{bubbles:!0,cancelable:!0,clientX:o,clientY:i,dataTransfer:n});Object.defineProperty(s,"dataTransfer",{value:n});var f=new DragEvent("dragover",{bubbles:!0,cancelable:!0,clientX:o,clientY:i,dataTransfer:n});Object.defineProperty(f,"dataTransfer",{value:n});var u=new DragEvent("drop",{bubbles:!0,cancelable:!0,clientX:o,clientY:i,dataTransfer:n});Object.defineProperty(u,"dataTransfer",{value:n});var d=new DragEvent("dragend",{bubbles:!0,cancelable:!0,clientX:o,clientY:i,dataTransfer:n});Object.defineProperty(d,"dataTransfer",{value:n});var p=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,clientX:o,clientY:i}),v=new TouchEvent("touchend",{bubbles:!0,cancelable:!0,changedTouches:[new Touch({identifier:Date.now(),target:t,clientX:o,clientY:i})]});try{document.dispatchEvent(c)}catch(g){console.log(g)}try{document.dispatchEvent(l)}catch(g){console.log(g)}try{t.dispatchEvent(s)}catch(g){console.log(g)}try{t.dispatchEvent(f)}catch(g){console.log(g)}try{t!=document&&t.dispatchEvent(u)}catch(g){console.log(g)}try{r.dispatchEvent(d)}catch(g){console.log(g)}t.dispatchEvent(p),t.dispatchEvent(v)},r=function(t){var n=!1;if((e.config.modes.clicking||e.config.modes.moving)&&(t.preventDefault(),t.stopPropagation(),i(),e.removeOverlays(),e.clearMoveAttributes(),n=!0),e.isTextInputActive()&&document.activeElement.blur(),n)return!1;document.activeElement!=document.body&&document.activeElement.blur()},a=function(t,n){if(e.config.headings.list=Array.from(document.querySelectorAll(t)).filter((function(t){var n=getComputedStyle(t);return"none"!==n.display&&"hidden"!==n.visibility&&!(!e.config.debug.screenReaderVisible&&!e.isTopLeftCornerVisible(t))})),0==e.config.headings.list.length)return!0;n.shiftKey?e.config.headings.currentHeadingIndex>0?e.config.headings.currentHeadingIndex--:e.config.headings.currentHeadingIndex=e.config.headings.list.length-1:e.config.headings.currentHeadingIndex<e.config.headings.list.length-1?e.config.headings.currentHeadingIndex++:e.config.headings.currentHeadingIndex=0;var o=e.config.headings.list[e.config.headings.currentHeadingIndex];o.getAttribute("tabindex")||o.setAttribute("tabindex","-1"),o.focus(),o.addEventListener("blur",(function e(){o.removeAttribute("tabindex"),o.removeEventListener("blur",e)}))},c=function(t){if(document.querySelectorAll(".openKeyNav-label").forEach((function(t){var n=t.textContent;if(!n.startsWith(e.config.typedLabel)){var o=document.querySelector('[data-openkeynav-label="'.concat(n,'"]'));o&&o.removeAttribute("data-openkeynav-label"),t.remove()}})),0==document.querySelectorAll(".openKeyNav-label").length)return r(t),!0},l=function(){var t="abcdefghijklmnopqrstuvwxyz";return t=t.replace(e.config.keys.escape,"")},s=function(e){var t=[],n=l(),o=Math.pow(n.length,2),i=e>o;i&&(o=Math.pow(n.length,3));for(var r=0;r<e&&t.length<o;r++){var a=n[r%n.length],c=n[Math.floor(r/n.length)%n.length]||"",s=i?n[Math.floor(r/Math.pow(n.length,2))%n.length]:"";t.push(a+c+s)}var f={};return t.forEach((function(e){var t=e[0];f[t]=(f[t]||0)+1})),t=t.map((function(e){var t=e[0];return 1!==f[t]||e.includes(".")?e:t})),t},f=function(t){var n=["a","button","textarea","select","input","iframe","summary","[onclick]"],o=["button","link","menuitem","option","tab","treeitem","checkbox","radio"];if(!(t instanceof Element))return!1;var i=getComputedStyle(t);if("none"===i.display)return!1;if(function(e){for(var t=e.parentNode,n=e.ownerDocument.body;t&&t!==n;){var o=getComputedStyle(t);if(["scroll","auto"].includes(o.overflow)||["scroll","auto"].includes(o.overflowX)||["scroll","auto"].includes(o.overflowY)){var i=t.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.bottom<i.top||r.top>i.bottom||r.right<i.left||r.left>i.right)return!0}t=t.parentNode}return!1}(t))return!1;if(t.matches("details:not([open]) *")&&!t.matches("details:not([open]) > summary, details:not([open]) > summary *"))return!1;var r=t.getAttribute("tabindex");if(r&&parseInt(r,10)>-1)return!0;if("hidden"===i.visibility)return!1;if(!e.isNonzeroSize(t))return!1;if(!function(e){var t=e.getBoundingClientRect();return t.top<window.innerHeight&&t.left<window.innerWidth&&t.bottom>0&&t.right>0}(t))return!1;if(!e.config.debug.screenReaderVisible&&!e.isTopLeftCornerVisible(t))return!1;if("summary"===t.tagName.toLowerCase()){var a=t.parentElement;if("details"===a.tagName.toLowerCase()&&a.querySelector("summary")!==t)return!1}r&&-1==parseInt(r,10)&&function(e){if(e.matches(n.join()))return!0;var t=e.getAttribute("role");return!(!t||!o.includes(t))}(t)&&e.flagAsInaccessible(t,"\n                <h2>Inaccessible Element</h2>\n                <h3>Problem: </h3>\n                <p>This element is not keyboard-focusable.</p>\n                <h3>Solution: </h3>\n                <p>Since this element has a tabindex attribute set to -1, it cannot be keyboard focusable.</p>\n                <p>It must have a tabindex set to a value &gt; -1, ideally 0.</p>\n                <p>You can ignore this warning if this element is not meant to be clickable.</p>\n                ","keyboard");var c=t.getAttribute("role");switch(t.tagName.toLowerCase()){case"a":t.hasAttribute("href")&&""!==t.getAttribute("href")||o.includes(c)||e.flagAsInaccessible(t,"\n                    <h2>Inaccessible Button</h2>\n                    <h3>Problem: </h3>\n                    <p>This clickable button is not keyboard-focusable.</p>\n                    <p>As a result, only mouse users can click on it.</p>\n                    <p>This usability disparity can create an accessibility barrier.</p>\n                    <h3>Solution: </h3>\n                    <p>Since it is an anchor tag (&lt;a&gt;), it needs a non-empty <em>href</em> attribute.</p>\n                    <p>Alternatively, it needs an ARIA <em>role</em> attribute set to something like 'button' or 'link' AND a tabindex attribute set to a value &gt; -1, ideally 0.</p>\n                    ","keyboard");break;case"button":case"textarea":case"select":case"input":case"iframe":case"summary":break;default:if(!o.includes(c)){e.config.modesConfig.click.clickEventElements.has(t)&&"fromClickEvents",e.flagAsInaccessible(t,"\n                \x3c!--\n                  !el(a,button,textarea,select,input,iframe,summary)\n                  !el[role('button', 'link', 'menuitem', 'option', 'tab', 'treeitem', 'checkbox', 'radio')]\n                  fromClickEvents\n                --\x3e\n                <h2>Possibly Inaccessible Clickable Element</h2>\n                <h3>Problem: </h3>\n                <p>This element has a mouse click event handler attached to it, but it is not keyboard-focusable.</p>\n                <p>As a result, only mouse users can click on it.</p>\n                <p>This usability disparity can create an accessibility barrier.</p>\n                <h3>Solution Options: </h3>\n                <ol>\n                  <li>\n                    <p>If clicking this element takes the user to a different location, convert this element to an anchor link (&lt;a&gt;) with a non-empty <em>href</em> attribute.</p>\n                  </li>\n                  <li>\n                    <p>Otherwise if clicking this element triggers an action on the page, convert this element to a &lt;button&gt; without a <em>disabled</em> attribute.</p>\n                    <p>Alternatively, it needs an ARIA <em>role</em> attribute set to something like 'button' or 'link' AND a tabindex attribute set to a value &gt; -1, ideally 0.</p>\n                  </li>\n                  <li>\n                    <p>Otherwise, if clicking this element does not do anything, then consider removing the click event handler attached to this element.</p>\n                  </li>\n                </ol>\n                ","keyboard")}}return!0},u=function(t){var n=Array.from(t.querySelectorAll("a,button:not([disabled]),textarea:not([disabled]),select:not([disabled]),input:not([disabled]),iframe,details > summary,[role=button],[role=link],[role=menuitem],[role=option],[role=tab],[role=treeitem],[role=checkbox],[role=radio],[aria-checked],[contenteditable=true],[contenteditable=plaintext-only],[tabindex],[onclick]"));t.querySelectorAll("iframe").forEach((function(e){try{var t=e.contentDocument||e.contentWindow.document,o=u(t);n=n.concat(Array.from(o))}catch(i){console.log("Access denied to iframe content:",i)}}));var i=new Set([].concat(o(n),o(e.config.modesConfig.click.clickEventElements)));return Array.from(i)},d=function(){var t;(t=function(t){t.addEventListener("scroll",e.preventScroll,{passive:!1}),t.addEventListener("wheel",e.preventScroll,{passive:!1}),t.addEventListener("touchmove",e.preventScroll,{passive:!1})})(window),e.getScrollableElements().forEach((function(e){t(e)})),setTimeout((function(){var t=u(document).filter((function(e){return f(e)})),n=s(t.length);t.forEach((function(e,t){e.setAttribute("data-openkeynav-label",n[t])})),t.forEach((function(t,o){e.createOverlay(t,n[o])}))}),0)},p=function(t){try{var n=t.contentDocument||t.contentWindow.document,o=n.querySelector('[data-openkeynav-label="'.concat(e.config.typedLabel,'"]'));if(o&&(target=o,!n.keypressListenerAdded)){var i=n.createElement("script");i.textContent="document.addEventListener('keydown', function(event) {window.parent.postMessage({type: 'keydown',key: event.key,keyCode: event.keyCode,altKey: event.altKey,ctrlKey: event.ctrlKey,shiftKey: event.shiftKey,metaKey: event.metaKey}, '*');});document.keypressListenerAdded = true;",n.body.appendChild(i)}}catch(r){console.log("Error accessing iframe content",r)}},v=function(t,n){var o=t.ownerDocument,i=o.defaultView||o.parentWindow,r=t.tagName.toLowerCase();if("input"===r||"textarea"===r||"true"===t.contentEditable||"plaintext-only"===t.contentEditable||t.hasAttribute("tabindex")&&t.tabIndex>-1)t.focus(),function(e){var t=e.tagName.toLowerCase();setTimeout((function(){if(e.focus(),"input"===t||"textarea"===t){var n=e.value.length;e.selectionStart=n,e.selectionEnd=n,e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}else if("true"===e.contentEditable||"plaintext-only"===e.contentEditable){var o=document.createRange(),i=window.getSelection();o.selectNodeContents(e),o.collapse(!1),i.removeAllRanges(),i.addRange(o);var r=o.getBoundingClientRect();(r.bottom>window.innerHeight||r.top<0)&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}}),0)}(t);else if(n.shiftKey&&"a"===t.tagName.toLowerCase()&&t.href)i.open(t.href,"_blank");else if(t.focus(),!e.config.modesConfig.click.modifier){var a=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:i});t.dispatchEvent(a)}e.removeOverlays(),e.clearMoveAttributes()},g=function(n){var o,i=l();if(Array.from(i).some((function(e){return e.toLowerCase()==n.key.toLowerCase()})))e.config.typedLabel+=n.key.toLowerCase(),o=document.querySelector('[data-openkeynav-label="'.concat(e.config.typedLabel,'"]:not(.openKeyNav-label)'));else if("Tab"===n.key){o=function(e){e.preventDefault();var t="next";return e.shiftKey&&(t="previous"),function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next",o=e;o;)if("previous"===n){for(o=o.previousElementSibling;!o&&e.parentElement;)o=e.parentElement.previousElementSibling,e=e.parentElement;if(o){var i=o.querySelectorAll(t);if(i.length>0)return i[i.length-1];if(o.matches(t))return o}}else{if("next"!==n)throw new Error("Invalid direction. Use 'previous' or 'next'.");for(o=o.nextElementSibling;!o&&e.parentElement;)o=e.parentElement.nextElementSibling,e=e.parentElement;if(o){if(o.matches(t))return o;var r=o.querySelector(t);if(r)return r}}return null}(openKeyNav.config.modesConfig.move.selectedMoveable,"[data-openkeynav-label]:not(.openKeyNav-label)",t)}(n)}return o?e.config.modesConfig.move.selectedMoveable?(function(t){console.log("Selected move target:",t),e.config.modesConfig.move.selectedDropZone=t,e.config.modesConfig.move.config[e.config.modesConfig.move.selectedConfig].callback?e.config.modesConfig.move.config[e.config.modesConfig.move.selectedConfig].callback(e.config.modesConfig.move.selectedMoveable,e.config.modesConfig.move.selectedDropZone):b(e.config.modesConfig.move.selectedMoveable,e.config.modesConfig.move.selectedDropZone),e.config.modesConfig.move.modifier||(e.removeOverlays(!0),e.clearMoveAttributes())}(o),!0):(console.log("Selected element to move:",o),function(t){var n=e.config.modesConfig.move.modifier;e.removeOverlays(),e.config.modes.moving=!0,e.config.modesConfig.move.selectedMoveable=t,e.config.modesConfig.move.selectedMoveableHTML=t.innerHTML,e.config.modesConfig.move.modifier=n;var o=t.getAttribute("data-openkeynav-moveconfig");if(null!==o){var i=parseInt(o,10);e.config.modesConfig.move.selectedConfig=i;var r=e.config.modesConfig.move.config[i];if(r){var a=[].filter.call(document.querySelectorAll(r.toElements),f),c=s(a.length);a.forEach((function(e,t){e.setAttribute("data-openkeynav-label",c[t])})),a.forEach((function(t,n){e.isNonzeroSize(t)&&(e.createOverlay(t,c[n]),t.setAttribute("data-openkeynav-dropzone","true"))}))}}}(o),t(),!0):(c(n),!1)},b=function(o,r){i(r),function(){if(!e.config.modesConfig.move.modifier)return!1;if(e.config.typedLabel="",e.config.modesConfig.move.selectedDropZone=!1,!document.contains(e.config.modesConfig.move.selectedMoveable)){var o=function(e){function t(e){return e.replace(/<!--[\s\S]*?-->/g,"")}var o,i=t(e),r=n(document.querySelectorAll("*"));try{for(r.s();!(o=r.n()).done;){var a=o.value;if(t(a.innerHTML)===i)return a}}catch(c){r.e(c)}finally{r.f()}return null}(e.config.modesConfig.move.selectedMoveableHTML),i=e.config.modesConfig.move.config[e.config.modesConfig.move.selectedConfig],r=o&&o.matches(i.fromElements)||o.matches(i.fromContainer+" > *"),a=o&&!o.matches(i.fromExclude);r&&a?(console.log("Matching element found:",o),e.config.modesConfig.move.selectedMoveable=o,e.config.modesConfig.move.selectedMoveableHTML=o.innerHTML,e.updateOverlayPosition(o,e.config.modesConfig.move.selectedLabel),t()):(console.log("No matching element found."),e.removeOverlays(!0),e.clearMoveAttributes())}}()};document.addEventListener("keydown",(function(t){switch(t.key){case"Shift":case"Control":case"Alt":case"Meta":case" ":return!0;case"Escape":r(t)}if(e.config.modes.clicking)return function(t){t.preventDefault(),e.config.typedLabel+=t.key.toLowerCase();var n=document.querySelector('[data-openkeynav-label="'.concat(e.config.typedLabel,'"]'));return n||document.querySelectorAll("iframe").forEach((function(e){p(e)})),n?(setTimeout((function(){v(n,t)}),0),!0):(c(t),!1)}(t);if(e.config.modes.moving)return g(t);if(e.isTextInputActive()&&!t.ctrlKey)return!0;if(t.key===e.config.keys.escape)return r(t),!0;switch(t.key){case e.config.keys.click:case e.config.keys.click.toUpperCase():return t.preventDefault(),e.config.modes.clicking=!0,t.key==e.config.keys.click.toUpperCase()&&(e.config.modesConfig.click.modifier=!0),d(),!0;case e.config.keys.move:case e.config.keys.move.toUpperCase():return t.preventDefault(),e.config.modes.moving=!0,t.key==e.config.keys.move.toUpperCase()&&(e.config.modesConfig.move.modifier=!0),function(){var t=[],n=o(new Set(e.config.modesConfig.move.config.filter((function(e){return e.fromElements})).map((function(e){return e.fromElements}))));n.length&&document.querySelectorAll(n.join(", ")).forEach((function(n){var o=e.config.modesConfig.move.config.find((function(e){return n.matches(e.fromElements)}));if(o){var i=e.config.modesConfig.move.config.indexOf(o);!e.isNonzeroSize(n)||o.fromExclude&&n.matches(o.fromExclude)||(n.setAttribute("data-openkeynav-moveconfig",i),t.push(n))}}));var i=o(new Set(e.config.modesConfig.move.config.filter((function(e){return e.fromContainer})).map((function(e){return e.fromContainer}))));i.length&&document.querySelectorAll(i.join(", ")).forEach((function(n){var o=e.config.modesConfig.move.config.find((function(e){return n.matches(e.fromContainer)}));if(o){var i=e.config.modesConfig.move.config.indexOf(o);Array.from(n.children).forEach((function(n){!e.isNonzeroSize(n)||o.fromExclude&&n.matches(o.fromExclude)||(n.setAttribute("data-openkeynav-moveconfig",i),t.push(n))}))}})),e.config.modesConfig.move.config.forEach((function(n){n.resolveFromElements&&n.resolveFromElements().forEach((function(o){var i=e.config.modesConfig.move.config.indexOf(n);!e.isNonzeroSize(o)||n.fromExclude&&o.matches(n.fromExclude)||(o.setAttribute("data-openkeynav-moveconfig",i),t.push(o))}))})),t=t.filter((function(e){return f(e)}));var r=s(t.length);t.forEach((function(e,t){e.setAttribute("data-openkeynav-label",r[t])})),t.forEach((function(t,n){e.createOverlay(t,r[n]),t.setAttribute("data-openkeynav-draggable","true")}))}(),!0}switch(t.key.toLowerCase()){case e.config.keys.heading.toLowerCase():return t.preventDefault(),a("h1, h2, h3, h4, h5, h6",t),!0;case e.config.keys.scroll.toLowerCase():return t.preventDefault(),function(t){if(e.config.scrollables.list=e.getScrollableElements(),0!=e.config.scrollables.list.length){t.shiftKey?e.config.currentScrollableIndex=e.config.currentScrollableIndex>0?e.config.currentScrollableIndex-1:e.config.scrollables.list.length-1:e.config.currentScrollableIndex=e.config.currentScrollableIndex<e.config.scrollables.list.length-1?e.config.currentScrollableIndex+1:0;var n=e.config.scrollables.list[e.config.currentScrollableIndex];n.getAttribute("tabindex")||n.setAttribute("tabindex","-1"),n.focus(),n.addEventListener("blur",(function e(){n.removeAttribute("tabindex"),n.removeEventListener("blur",e)}))}}(t),!0}if(t.code)switch({Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0"}[t.code]){case e.config.keys.heading_1:t.preventDefault(),a("h1",t);break;case e.config.keys.heading_2:t.preventDefault(),a("h2",t);break;case e.config.keys.heading_3:t.preventDefault(),a("h3",t);break;case e.config.keys.heading_4:t.preventDefault(),a("h4",t);break;case e.config.keys.heading_5:t.preventDefault(),a("h5",t);break;case e.config.keys.heading_6:t.preventDefault(),a("h6",t)}}),!0),window.addEventListener("message",(function(e){if("keydown"===e.data.type){console.log("Key pressed in iframe:",e.data.key);var t=new KeyboardEvent("keydown",{key:e.data.key,keyCode:e.data.keyCode,altKey:e.data.altKey,ctrlKey:e.data.ctrlKey,shiftKey:e.data.shiftKey,metaKey:e.data.metaKey,bubbles:!0,cancelable:!0});"Escape"===t.key&&r(e),document.dispatchEvent(t)}}))}},{key:"setupGlobalClickListenerTracking",value:function(){var e=this.config.modesConfig.click.clickEventElements,t=EventTarget.prototype.addEventListener,o=EventTarget.prototype.removeEventListener;function i(t){e.has(t)&&e.delete(t),t.querySelectorAll("*").forEach((function(t){e.has(t)&&e.delete(t)}))}EventTarget.prototype.addEventListener=function(n,o,i){"click"===n&&(o&&/^\s*function\s*\(\)\s*\{\s*\}\s*$/.test(o.toString())||e.add(this));return t.call(this,n,o,i)},EventTarget.prototype.removeEventListener=function(t,n,i){"click"===t&&(0===function(e,t){var n=[],o="__eventListener__".concat(t);e[o]&&n.push({listener:e[o]});return n}(this,"click").filter((function(e){return e.listener!==n})).length&&e.delete(this));return o.call(this,t,n,i)},new MutationObserver((function(e){var t,o=n(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;r.removedNodes.length>0&&r.removedNodes.forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&i(e)}))}}catch(a){o.e(a)}finally{o.f()}})).observe(document.body,{childList:!0,subtree:!0})}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.deepMerge(this.config,e),this.injectStylesheet(),this.addKeydownEventListener(),this.setupGlobalClickListenerTracking(),console.log("Library initialized with config:",this.config)}}])}();t.default=b}}]);